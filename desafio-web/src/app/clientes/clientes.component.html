<p-toast></p-toast>

<div class="container">
  <button pButton type="button" label="Fazer Logout" class="ui-button-raised ui-button-rounded" (click)="auth.logout()"></button>

  <!-- Mostra a tabela apenas se o formulário não estiver ativo -->
  <div>
    <button
      pButton
      type="button"
      label="Novo Cliente"
      icon="pi pi-plus"
      (click)="novoCliente()"
      style="background-color: #28a745; border: none">
    </button>

    <div class="cliente-list">
      <div class="search-bar">
        <input
          type="text"
          pInputText
          [(ngModel)]="nomePesquisa"
          placeholder="Digite o nome do cliente"
          (keyup.enter)="pesquisar()"
        />
        <button pButton type="button" icon="pi pi-search" (click)="pesquisar()"></button>
        <button pButton type="button" label="Limpar" icon="pi pi-times" class="limpar-button" (click)="limparPesquisa()"></button>

      </div>

      <div class="header">
        <h2>Lista de Clientes</h2>
        <button
          pButton
          type="button"
          icon="pi pi-download"
          label="Baixar PDF Geral"
          class="p-button-success subir-5"
          (click)="gerarPDF()"
        ></button>
      </div>


      <p-table
        [value]="clientesFiltrados.length > 0 ? clientesFiltrados : clientes"
        [paginator]="true"
        [rows]="10"
        responsiveLayout="scroll"
      >

        <ng-template pTemplate="header">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Idade</th>
            <th>Ações</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cliente>
          <tr>
            <td>{{ cliente.name }}</td>
            <td>{{ cliente.email }}</td>
            <td>{{ cliente.phoneNumber }}</td>
            <td> {{ cliente.age }}</td>
            <td>
              <div class="button-group">
                <button
                  pButton
                  type="button"
                  icon="pi pi-pencil"
                  class="small-btn edit-btn"
                  (click)="updateClient(cliente)"
                ></button>
                <button
                  pButton
                  type="button"
                  icon="pi pi-trash"
                  class="small-btn delete-btn"
                  (click)="deleteCliente(cliente)"
                ></button>
                <button
                  pButton
                  type="button"
                  icon="pi pi-file-word"
                  class="small-btn docx-btn"
                  (click)="gerarDOCX(cliente.id)"
                  label="DOCX"
                ></button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</div>
